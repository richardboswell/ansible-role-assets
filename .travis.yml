# Copyright Â© 2017 VMware, Inc. All Rights Reserved.
---
sudo: required
language: python
#cache: pip
services:
  - docker
before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -o Dpkg::Options::="--force-confold" --force-yes -y docker-engine
  - find .
  - cat molecule.yml
install:
  - pip install molecule
  # - pip install required driver (e.g. docker, python-vagrant, shade)
  - pip install docker
  - mkdir tests/roles
  - ln -s ../ tests/roles/assets
script:
  - MOLECULE_PLAYBOOK=tests/travis-playbook.yml molecule status
  - MOLECULE_PLAYBOOK=tests/travis-playbook.yml molecule create
  - MOLECULE_PLAYBOOK=tests/travis-playbook.yml molecule verify
  - cat .molecule/ansible_inventory || true
  - MOLECULE_PLAYBOOK=tests/travis-playbook.yml molecule test

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
